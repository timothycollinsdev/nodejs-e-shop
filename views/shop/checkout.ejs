<%- include('../includes/head.ejs') %>    
    <link rel="stylesheet" href="/css/cart.css">
    <link rel="stylesheet" href="/css/global.css">
    <title>Accept a card payment</title>
    <script src="https://js.stripe.com/v3/"></script>
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
       <main>
        <ul class="cart__item-list">
            <% products.forEach(p => { %>
                <li class="cart__item">
                    <h1><%= p.productId.title %></h1>
                    <h2>Quantity: <%= p.quantity %></h2>
                </li>
            <% }) %>
        </ul>
        <div class="centered">
            <h2>
                Total: <%= totalSum %>
            </h2>
            <form id="payment-form" data-secret="<%= client_secret %>" action="/create-order" method="POST">
                <div id="card-element">
                  <!-- Elements will create input elements here -->
                  <script src="/js/checkout.js"></script>
                </div>
              
                <!-- We'll put the error messages in this element -->
                <div id="card-errors" role="alert"></div>
              
                <button id="card-button" type="submit">Submit Payment</button>
              </form>
        </div>
       </main>
        <%- include('../includes/end.ejs') %>